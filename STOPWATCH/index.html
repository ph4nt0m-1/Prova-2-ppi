<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/edec7f25e3.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/lottie-web@5.7.4/build/player/lottie.min.js"></script>
</head>
<body>
    <div class="container col-lg-4 bg-primary mt-5 rounded text-center py-3">
        <h1 class="text-white">Stopwatch</h1>
        <div class="container rounded-circle bg-white d-flex justify-content-center align-items-center mt-5" style="width: 200px; height: 200px; position: relative;">
            <div id="spinner-container" style="width: 250px; height: 250px; position: absolute;"></div>
            <span class="display-4 d-none" id="hours">0</span>
            <span class="display-4 d-none" id="mins">0</span>
            <span class="display-4" id="secs">0</span>
            <span id="ms">00</span>
        </div>
        <div class="buttons my-5">
            <button class="btn btn-light" id="reset-btn"><i class="fas fa-undo fa-lg"></i></button>
            <button class="btn btn-light" id="startPause-btn"><i class="fas fa-play fa-lg"></i></button>
            <button class="btn btn-light" id="timeStamp-btn"><i class="fas fa-stopwatch fa-lg"></i></button>
        </div>
        <table class="table table-dark mx-auto d-none" id="table">
            <thead>
                <tr>
                    <th>Count</th>
                    <th>Time Stamp</th>
                </tr>
            </thead>
            <tbody id="table-body"></tbody>
        </table>
    </div>
    <script>
        let spinnerContainer = document.getElementById('spinner-container');
        let spinnerAnimation = bodymovin.loadAnimation({
            container: spinnerContainer,
            renderer: 'svg',
            loop: true,
            autoplay: true,
            animationData: {"nm":"Spinner","ddd":0,"h":210,"w":210,"layers":[{"ty":4,"nm":"spinner","ks":{"a":{"k":[160,284,0]},"s":{"k":[271.16,271.16,100]},"p":{"k":[105,105,0]},"o":{"k":100}},"shapes":[{"ty":"gr","it":[{"ty":"sh","ks":{"k":{"v":[[36,0],[0,-36],[-36,0],[0,36]]}}},{"ty":"st","o":{"k":100},"w":{"k":7},"c":{"k":[0.1843,0.1882,0.1922]}}]}]}]}
        });

        const resetBtn = document.getElementById('reset-btn');
        const startPauseBtn = document.getElementById('startPause-btn');
        const timeStampBtn = document.getElementById('timeStamp-btn');
        const hours = document.getElementById('hours');
        const mins = document.getElementById('mins');
        const secs = document.getElementById('secs');
        const ms = document.getElementById('ms');
        let h = 0, m = 0, s = 0, mss = 0;
        let hourRate, minsRate, secsRate, msRate, tableTimeRate;
        let countNo = 1;

        function startTimer() {
            if (startPauseBtn.firstElementChild.classList.contains('fa-play')) {
                updateMs(); updateSecs(); updateMins(); updateHours();
                startPauseBtn.firstElementChild.classList.replace('fa-play', 'fa-pause');
                spinnerContainer.classList.remove('d-none');
            } else {
                clearInterval(hourRate); clearInterval(minsRate); clearInterval(secsRate); clearInterval(msRate);
                startPauseBtn.firstElementChild.classList.replace('fa-pause', 'fa-play');
                spinnerContainer.classList.add('d-none');

                getTimeStamp();
            }
        }

        function resetTimer() {
            clearInterval(hourRate); clearInterval(minsRate); clearInterval(secsRate); clearInterval(msRate);
            hours.textContent = ''; mins.textContent = ''; secs.textContent = '00'; ms.textContent = '00';
            document.getElementById('table').classList.add('d-none');
            startPauseBtn.firstElementChild.classList.replace('fa-pause', 'fa-play');
            document.getElementById('table-body').innerHTML = '';
            countNo = 1;
            spinnerContainer.classList.add('d-none');
        }

        function updateMs() { msRate = setInterval(() => { ms.textContent = (++mss % 90).toString().padStart(2, '0'); }, 10); }
        function updateSecs() { secsRate = setInterval(() => { secs.textContent = (++s % 60).toString().padStart(2, '0'); }, 1000); }
        function updateMins() { minsRate = setInterval(() => { mins.classList.remove('d-none'); mins.textContent = `${++m % 60}:`; }, 60000); }
        function updateHours() { hourRate = setInterval(() => { hours.classList.remove('d-none'); hours.textContent = `${++h}:`; }, 3600000); }

        function getTimeStamp() {
            clearInterval(tableTimeRate);
            const row = document.createElement('tr');
            row.innerHTML = `<td>${countNo++}</td><td>${h}:${m}:${s}:${mss}</td>`;
            document.getElementById('table-body').appendChild(row);
            document.getElementById('table').classList.remove('d-none');
        }

        startPauseBtn.addEventListener('click', startTimer);
        resetBtn.addEventListener('click', resetTimer);
        timeStampBtn.addEventListener('click', getTimeStamp);
    </script>
</body>
</html>
